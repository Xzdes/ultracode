# ultracode

Быстрый и минималистичный декодер штрих-кодов на Rust. Сейчас поддерживаются:

- **EAN-13 / UPC-A** (1D)
- **Code128** (наборы A/B/C, checksum, поиск STOP справа-налево)
- **QR (частично)**: утилиты для формат-слова (BCH, пути чтения и упаковка битов) — полноценный e2e-декодер QR *пока в работе*.

Проект без внешних зависимостей (только `std`). В комплекте идут утилиты для синтетики и тестовые бинарники.

## Быстрый старт

```bash
# сборка
cargo build

# тесты
cargo test
````

Ожидаемый вывод сейчас — все юнит-тесты для 1D и QR-утилит проходят.

## Демонстрационные утилиты

В репозитории есть 3 бинарника (см. `src/bin`):

* `scan_synthetic` — пример работы с синтетическими рядами EAN-13.
* `scan_pgm` — чтение простых PGM-изображений и попытка распознать строку штрих-кода.
* `scan_code128_synth` — генерация и сканирование синтетики Code128.

Примеры запуска:

```bash
# помощь по ключам
cargo run --bin scan_synthetic -- --help
cargo run --bin scan_pgm -- --help
cargo run --bin scan_code128_synth -- --help

# пример: сгенерировать и проверить Code128
cargo run --bin scan_code128_synth

# пример: прогнать синтетику EAN-13
cargo run --bin scan_synthetic
```

## Структура

* `src/lib.rs` — публичный API библиотеки.
* `src/one_d/` — декодеры 1D:

  * `ean13.rs` — распознавание EAN-13/UPC-A.
  * `code128.rs` — распознавание Code128 (A/B/C, SHIFT, FNC1, checksum).
* `src/qr/` — утилиты для QR:

  * `format.rs` — BCH для формат-слова, пути чтения, упаковка битов.
  * `mod.rs` — вспомогательные функции и тесты на формат-слово.
* `src/bin/` — демонстрационные программы.

## Состояние QR

QR сейчас ограничен обработкой **format word** (BCH и чтение с фиксированных путей), чтобы упростить базу и держать тесты стабильными. Когда будет готово:

* поиск finder-паттернов,
* выравнивание/семплинг,
* RS-декодирование блоков,

добавим e2e-тесты и полную интеграцию в общий `decode`.
